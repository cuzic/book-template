# book:apply - レビュー結果適用スキル

レビュー結果の改善提案を目次・章に反映します。

## 使い方

```
/book:apply                     # 最新のレビュー結果を適用
/book:apply --review <ファイル>  # 指定したレビューファイルを適用
/book:apply --interactive       # 各提案を確認しながら適用
```

## 処理内容

1. `knowledges/reviews/` から最新のレビュー結果を読み込む
2. 改善提案を優先度順にソート
3. 各提案について:
   - 該当する章ファイルを特定
   - 変更内容を適用
   - 変更履歴を記録
4. 適用結果のサマリーを出力

### インタラクティブモード

`--interactive` オプション使用時:

1. 各改善提案を順番に表示
2. ユーザーに適用可否を確認
3. 「適用」「スキップ」「修正して適用」から選択
4. 選択に応じて処理を実行

## 変更の種類

### 章の追加

```markdown
## 改善提案: 新しい章を追加

提案: 第3章と第4章の間に「実践編」を追加

実行する変更:
- src/chapters/03.5-practice.md を作成
- 後続の章番号を繰り上げ
```

### 章の順序変更

```markdown
## 改善提案: 章の順序を変更

提案: 第5章を第3章の前に移動

実行する変更:
- ファイル名のリナンバリング
- 章内の相互参照を更新
```

### セクションの追加・削除

```markdown
## 改善提案: セクションを追加

提案: 第2章に「よくある間違い」セクションを追加

実行する変更:
- src/chapters/02-basics.md に新セクションを追加
```

## 出力フォーマット

適用後のサマリー:

```markdown
# レビュー適用結果

適用日: YYYY-MM-DD
対象レビュー: knowledges/reviews/YYYY-MM-DD-review.md

## 適用した改善

| # | 提案 | ステータス | 変更ファイル |
|---|------|-----------|-------------|
| 1 | 〜を追加 | ✅ 適用 | 03-xxx.md |
| 2 | 〜を移動 | ✅ 適用 | 04-xxx.md, 05-xxx.md |
| 3 | 〜を削除 | ⏭️ スキップ | - |

## 変更されたファイル

- src/chapters/03-xxx.md: セクション追加
- src/chapters/04-xxx.md: リナンバリング
- src/chapters/05-xxx.md: リナンバリング

## 次のステップ

- 変更内容を確認してコミット
- 必要に応じて再レビュー (/book:review)
```

## 注意事項

- 適用前に必ず変更内容をプレビュー
- 大きな変更は `--interactive` モードを推奨
- 適用後は `bun run lint` で文法チェック
